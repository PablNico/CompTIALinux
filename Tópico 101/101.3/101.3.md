# 101.3 - Alterar os RunLevels, Shutdown e Reboot 



## Gerenciadores de inicialização

- SystemV (SysV) - Init original, era padrão desde o Unix.
- systemd - Evolução do SysV, ainda sendo compatível com ele. Padrão da maioria dos sistemas Linux atualmente.
- Upstart: Gerenciador de serviços substituto ao init que vem ganhando espaço, será sucessor do systemd brevemente e conta com opções de compatibilidade.



#### SystemV (SysV)



Conta com um sistema de níveis de execução, cada um deles carrega um pacote de programas, serviços, scripts e etc.

Seu arquivo de configuração principal fica em  **`/etc/inittab`**e seus scripts  **`/etc/init.d` ** e **`/etc/rc.d` **





|   ID    |             DESCRIÇÃO             |
| :-----: | :-------------------------------: |
|    0    |      Desligamento (Shutdown)      |
| 1, s, S |      Single User/Recuperação      |
|    2    |       Multiuser (sem rede)        |
|    3    |       Multiuser (Com rede)        |
|    4    | Multiuser (Definido pelo usuário) |
|    5    |  Multiuser (Com rede e Gráfico)   |
|    6    |     Reinicialização (Reboot)      |

 

Isso pode variar de distribuição para distribuição, mas esse é o padrão do Linux.



No momento que a MBR chama o Kernel que por sua vez chama o **`Init`** para iniciar os processos, a configuração do init se encontrar no arquivo **`/etc/inittab`**.

Explicando como editar **inittab**:

```bash
#Runlevel default
# Para mudar o runlevel padrão basta mudar o número "2" para aquele que deseja
id:2:initdefault

#id:runlevel:action:process [parametro]
# Localização dos scripts, passamos como parâmetro o número do runlevel desejado
l0:0:wait:/etc/init.d/rc 0

l1:1:wait:/etc/init.d/rc 1

l2:2:wait:/etc/init.d/rc 2

l3:3:wait:/etc/init.d/rc 3

l4:4:wait:/etc/init.d/rc 4

l5:5:wait:/etc/init.d/rc 5

l6:6:wait:/etc/init.d/rc 6
```

Dentro do diretório **`/etc/init.d/`** temos vários serviçoes para executar.

Dentro do diretório **`/etc/rc*.d`** são os runlevels e cada um tem seu diretório, dentro dele estão os scripts e serviços que devem ser executados ou finalizados. Quando algum arquivo conta com a letra **S** ou **K**, significa que o serviço será iniciado ou finalizado respectivamente.

 

Com o comando **`runlevel`** mostra o **runlevel** atual e caso ele tenha sido alterado em algum momento mostra também o **runlevel** anterior.

Para alterar o **runlevel** usamos o comando **`telinit`** **`init`** para mudar, precisamos passar apenas o runlevel desejado.